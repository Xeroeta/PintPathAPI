functions:
  #User
  user_create:
    handler: src/users/create.create
    events:
      - http:
          path: users
          method: post
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  user_list:
    handler: src/users/list.list
    events:
      - http:
          path: users
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  user_get:
    handler: src/users/get.get
    events:
      - http:
          path: users/{id}
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  user_update:
    handler: src/users/update.update
    events:
      - http:
          path: users/{id}
          method: put
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  
  #Venue
  venue_list:
    handler: src/venues/list.list
    events:
      - http:
          path: venues
          method: get
          cors: true
          integration: lambda
#          private: true
#          authorizer:
#            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
#            claims:
#              - email
#              - nickname
#              - sub
  venue_get:
    handler: src/venues/get.get
    events:
      - http:
          path: venues/{id}
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #UserCheckIns
  snap_list:
    handler: src/snaps/list.list
    events:
      - http:
          path: snaps
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  snap_get:
    handler: src/snaps/get.get
    events:
      - http:
          path: snaps/{id}
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  snap_update:
    handler: src/snaps/update.update
    events:
      - http:
          path: snaps/{id}
          method: put
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  snap_delete:
    handler: src/snaps/delete.delete
    events:
      - http:
          path: snaps/{id}
          method: delete
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #Badges
  badge_list:
    handler: src/badges/list.list
    events:
      - http:
          path: badges
          method: get
          cors: true
          integration: lambda
#          private: true
#          authorizer:
#            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
#            claims:
#              - email
#              - nickname
#              - sub
  badge_get:
    handler: src/badges/get.get
    events:
      - http:
          path: badges/{id}
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #User Badges
  user_badge_list:
    handler: src/user_badges/list.list
    events:
      - http:
          path: user-badges
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  user_badge_get:
    handler: src/user_badges/get.get
    events:
      - http:
          path: user-badges/{id}
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #Clients
  client_create:
    handler: src/clients/create.create
    events:
      - http:
          path: clients
          method: post
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #Clusters
  cluster_create:
    handler: src/clusters/create.create
    events:
      - http:
          path: clusters
          method: post
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  cluster_list:
    handler: src/clusters/list.list
    events:
      - http:
          path: clusters
          method: get
          cors: true
          integration: lambda
#          private: true
#          authorizer:
#            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
#            claims:
#              - email
#              - nickname
#              - sub
  cluster_update:
    handler: src/clusters/update.update
    events:
      - http:
          path: clusters
          method: put
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  cluster_get:
    handler: src/clusters/get.get
    events:
      - http:
          path: clusters/{id}
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #Schedules
  schedule_list:
    handler: src/schedules/list.list
    events:
      - http:
          path: schedules
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub

  #Push Notifications
  notification_create:
    handler: src/notifications/create.create
    events:
      - http:
          path: notifications
          method: post
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  notification_update:
    handler: src/notifications/update.update
    events:
      - http:
          path: notifications
          method: put
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
  notification_list:
    handler: src/notifications/list.list
    events:
      - http:
          path: notifications
          method: get
          cors: true
          integration: lambda
          private: true
          authorizer:
            arn: ${file(./config/aws_params.yml):USER_POOL_ARN}
            claims:
              - email
              - nickname
              - sub
#        request:
#          parameters:
#            paths:
#              id: true
#        response:
#          headers:
#            Content-Type: "'text/json'"
#          template: $input.path('$')
#          statusCodes:
#              201:
#                  pattern: '' # Default response method
#              400:
#                  pattern: '' # Bad Request
#              401:
#                  pattern: '' # Unauthorized
#              403:
#                  pattern: '' # Forbidden
#              404:
#                  pattern: '' # Not Found
#              422:
#                  pattern: '' # Unprocessable Entity
#              409:
#                  pattern: '.*"statusCode":409,.*' # JSON response
#                  template: $input.path("$.errorMessage") # JSON return object
#                  headers:
#                    Content-Type: "'application/json+hal'"
#              500:
#                  pattern: '' # Internal Server Error
#              502:
#                  pattern: '' # Bad Gateway
#              504:
#                  pattern: '' # Gateway Timeout

#   authorizerFunc:
#     handler: src/handler.authorizerFunc
#  create:
#    handler: src/todos/create.create
#    events:
#      - http:
#          path: todos
#          method: post
#          cors: true
#          integration: lambda
#          private: true
#        authorizer:
#          name: authorizerFunc
#          arn: xxx:xxx:Lambda-Name #optional
#          resultTtlInSeconds: 0
#          identitySource: method.request.header.Authorization
#          identityValidationExpression: someRegex
